# 3. 코드 퀄리티 높이기

### General

* 알아보기 힘든 코드는 결국 버그를 만들게 된다.
* 안 좋은 코드는 1.흐름 파악이 어렵고 2.도메인 맥락 표현이 안되어 3.동료에게 물어봐야 알 수 있는 코드 이다.
* 데이터의 Immutablity가 중요함을 인지하고 불변성을 유지하기 위해 노력하자.
* 가능한 작은 함수를 작성하자.
* 동료들에게 설명할 수 없는 코드를 Commit 하지 않을 것.
* 코드 퀄리티 관리의 큰 목적 중 하나는 코드의 유지/보수를 위해서이다.
  * 구체적으로 살펴보면 개발 내적으로는 작성했던 코드를 나 또는 팀원이 재사용할 때 쉽게 사용할 수 있어야 한다.
  * 개발 외적으로는 정책/백엔드/디자인 이슈 등으로 로직을 수정할 때 쉽게 변경이 가능해야 한다. 이 부분은 단순히 최소 기능을 분리하는 것에서 넘어서\
    1\. Component의 HTML 규약을 따르고 동시에 외부 환경에 의존하지 않도록 한다. \
    2\. 작업한 Function/Hook이 외부 상태를 의도치 않게 변경하지 않아야 한다.
* 클린코드는 짧은 코드가 아니고 원하는 로직을 빠르게 찾을 수 있는 코드이다.
* **응집도**: 하나의 목적을 가진 코드가 흩뿌려져 있는 경우
  * 뭉치면 쾌적한 코드는 당장 몰라도 되는 디테일이고 뭉치면 답답한 코드는 코드 파악에 필수적인 핵심정보인 경우이다. 필수적인 핵심정보가 뭉쳐져 있게 된다면 이 코드를 찾아서 미로를 찾아야한다.
  *   커스텀 훅을 만들 때도 세부 구현만 숨겨 놓고 핵심 데이터인 팝업 제목, 내용, 액션은 바깥에서 넘겨 주어야 한다. \
      → 선언적 프로그래밍 (핵심 데이터만 전달받고 세부 구현은 뭉쳐 숨겨두는 개발 스타일)\
      → 무엇을 하는 함수인지 빠르게 이해가 가능하다.

      → 세부 구현은 내부에 뭉쳐 둠

      → 무엇만 바꿔서 쉽게 재사용 가능
* **단일 책임**: 함수가 여러가지 일을 하고 있는 경우
  * Tip1: 한 가지 일만 하는 명확한 이름의 함수
  * Tip2: 한 가지 일만 하는 기능성 컴포넌트
* **추상화**: 함수의 세부 구현 단계가 제각각인 경우
  * 핵심 개념을 뽑아내자
* **기능별로 함수 분리하기**
  * 문제에 제시된 기능들은 각각 다른 작업을 수행하기 때문에 관련 기능들을 서로 다른 함수로 분리해서 작성하는 것이 필요.
  * 이렇게 하면 코드의 가독성과 유지 보수성이 좋아진다.
* **오류 처리**
  * 사용자의 잘못된 동작에 대비하여 오류 처리.
  * 예를 들어, 장애인 체크 박스를 선택한 상태에서 어른 인원수를 증가시키거나 금액 계산이 올바르게 되지 않는 문제 등에 대해서 올바르게 대응할 수 있어야 한다.

### React Query

* Props drilling 하는 것 보다 각 컴포넌트에서 useQuery 요청하는 것을 지향하자.
  * 이유는 하나의 page에서 useQuery를 여러번 처리하더라도, option을 적절하게 주면 한 번의 API 콜로 모든 섹션과 모달에서 UI 렌더링에 필요한 객체 참조가 가능하기 때문이다.

### TypeScript

* type 강제는 자제 (ex. `gameStatus={game.buttonText as GameStatus}`)
  * interface에서 필드에 적용해도 안된다면 아래 useQuery에서 타입 제너릭으로 넣어주자.
* apis models의 enum은 주로 req/res 의 필드 정의하기 위함이 먼저라 buttonText filed도 enum GameStatus 적용하면hook에서 받아쓸 때 아래처럼 타입 강제 캐스팅 안하셔도 될 것 같습니다.
* 불필요한 옵셔널 체이닝 지양
  * 옵셔널 체이닝은 존재하지 않아도 괜찮은 대상에만 사용하자.
  * 논리상으로 필수적으로 존재해야하는 값에 옵셔널 체이닝을 사용하게되면 실수로 값을 할당하지 않았을 경우 에러를 발견하지 못하고 디버깅이 어려워 질 수 있다.

### HTML

* div 사용 수는 최대한 줄이자.

### CSS

* width 고정으로 가는걸 지양하자.
  * Section의 경우 화면이 약간은 줄어들더라도 UI적인 대응을 하기 위해
  * 버튼같은 경우에는 다국어, 텍스트 변경등이 생기는 경우 word break가 일어나지 않게 하기 위해

### JavaScript

* 이해하기 어려운 if 문 중첩을 지양하자.
* 데이터와 로직이 분산되어 있을 경우 (응집도가 낮은 구조)에 발생할 수 있는 문제들
  * 코드 중복: 관련된 것 끼리 묶어서 파악이 힘들다.
  * 수정 누락: 코드 중복이 많으면 중복된 코드를 모두 고쳐야 하기 때문에 누락이 발생하기 쉽다.
  * 가독성 저하

### Function

* 단순하게 코드를 나열하지 않고 의미있는 코드들을 모아서 함수로 만들자.
* 함수에서 매개변수가 너무 많아져도 안된다.
  * 매개변수가 많다는 것은 많은 기능을 처리하고 싶다는 의미
  * 처리할 것이 많아지면 로직이 복잡하거나 중복 코드가 생길 가능성이 높아진다.

### Naming

* 유지보수와 변경이 쉽도록 변수의 이름과 로직을 신경써서 작성하는 것이 곧 설계이다.
* Button의 경우에는 Wrapper 라고 네이밍 하기에는 어색함. 어떤 기능을 하는 버튼인지 네이밍하자.
* 의미를 알 수 없는 네이밍은 지양하자.
  * ex. 일련 번호로 지은 네이밍
* 목적별로 변수를 따로 만들어서 사용하자.

### Component

* HTML 규약에 따른 attribute를 확장해서 쓰거나 기존에 있던 props들을 최대한 활용하고 따르자. \
  웹 표준을 따르는 단위 컴포넌트 작업을 통해 어디에서나 문제없이 쓰일 수 있는 단위 컴포넌트, 나아가 더 복잡한 기능을 갖는 컴포넌트를 만들 수 있어야 한다.
  * 예를 들어 체크 박스 컴포넌트인 경우 일반적인 체크박스(\<input type='checkbox'/>)와 완전히 동일하게 동작해야 한다. props type을 설정할 때, HTMLAttribute를 extend 해야 함은 필수적.
  * 만약 이 부분을 빼먹고 다른 feature를 개발하는 중에 수정이 필요해서 수정하게 된다면 이미 완성했던 feature에서 뜬금없이 버그나 UI 크래시가 생길 우려가 있다.











### 어떻게 작성하는 코드가 좋은 코드일까요?
